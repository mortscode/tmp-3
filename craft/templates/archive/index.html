{% extends "_layout" %}

{% set archive = craft.entries({
    section: 'postEntries',
    with: [
      ['featuredImage', {
        withTransforms: ['archive']
      }],
    ],
    limit: null
}) %}

{% set snark = [
  'recipes and counting.',
  'delicious recipes so far.',
  'game changers.',
  'delightful dishes.',
] %}

{% block content %}
{% cache for 8 hours %}
  <div class="archive">
    <h1 class="archive__title">Post archive: <span class="message">{{ archive|length }} {{ random(snark) }}</span></h1>
    <ul class="archive__list">
      {% for entry in archive %}
      <li class="archive__list-item">
        <a href="{{entry.url}}" class="archive__list-item--link">
          {% if entry.featuredImage | length %}
            <img data-src="{{entry.featuredImage[0].url('archive')}}" class="archive__list-item--picture lazyload" alt="{{entry.title}}">
          {% endif %}
          <div class="archive__list-item--date">{{entry.postDate.format('F d, Y')}}</div>
          <h2 class="archive__list-item--title">{{ entry.title }}</h2>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
{% endcache %}
{% endblock %}